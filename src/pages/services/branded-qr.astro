---
import Hero from '~/components/widgets/Hero.astro';
import Layout from '~/layouts/PageLayout.astro';

const metadata = {
  title: 'Branded QR Services',
};
---

<Layout metadata={metadata}>
  <!-- Hero Widget ******************* -->
  <Hero
    tagline="FAR QR Services"
    title="Elevate Your Brand Identity with Branded QRs"
    subtitle="Stand out from the crowd. Move beyond standard black-and-white codes by incorporating your unique logo and style. With FAR QR, creating a professional impression is simple: enter your destination URL, upload your brand image, and process payment to receive a high-quality, customized QR code that truly represents your business."
    actions={[{ variant: 'primary', text: 'Get Started', href: '#trial-form', icon: 'tabler:arrow-down' }]}
    image={{
      src: 'https://images.unsplash.com/photo-1556761175-5973dc0f32e7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1740&q=80',
      alt: 'Branded QR Image',
    }}
  />

  <!-- FORM SECTION (Main Content) ******************* -->
  <div id="trial-form" class="scroll-mt-16 mb-20">
    <div class="flex flex-col max-w-6xl mx-auto px-4 sm:px-6 overflow-hidden">
        <div class="py-12 md:py-20 lg:py-24 rounded-lg bg-blue-50 dark:bg-slate-800 shadow-xl p-8">
            <div class="text-center pb-10 max-w-5xl mx-auto">
                <h2 class="text-3xl md:text-4xl font-bold tracking-tighter mb-4 font-heading text-heading">
                    Get Your Professional Branded QR
                </h2>
                <p class="text-xl text-muted dark:text-slate-400">
                    Ready to make your brand stand out?<br>
        Upload your logo and details to receive a custom, high-quality QR design.
                </p>
            </div>

           <form action="#" method="POST" enctype="multipart/form-data" class="max-w-3xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6">

    <!-- Email Input -->
    <div class="col-span-1 md:col-span-2">
        <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
            Email Address <span class="text-red-500">*</span>
        </label>
        <input type="email" id="email" name="email" placeholder="john@example.com" required
            class="w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-slate-900 focus:ring-blue-500 focus:border-blue-500 dark:text-white" />
    </div>

    <!-- Link Input -->
    <div class="col-span-1 md:col-span-2">
        <label for="link" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
            Target URL <span class="text-red-500">*</span>
        </label>
        <input type="url" id="link" name="link" placeholder="https://your-website.com" required
            class="w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-slate-900 focus:ring-blue-500 focus:border-blue-500 dark:text-white" />
        <p class="text-xs text-gray-500 mt-1">Enter the destination link for your QR code.</p>
    </div>

   <!-- File Upload Input -->
    <div class="col-span-1 md:col-span-2 mt-4">
        <label for="logo_upload" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
            Upload Logo/Image <span class="text-red-500">*</span>
        </label>
        <!-- Đã sửa lỗi: đưa required vào trong thẻ input -->
        <input 
            type="file" 
            id="logo_upload" 
            name="logo_upload" 
            accept=".jpg, .jpeg, .png, image/jpeg, image/png" 
            required
            class="w-full px-4 py-3 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-slate-900 text-gray-700 dark:text-gray-300 focus:ring-blue-500 focus:border-blue-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" 
        />
        <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">
            For best results, use a high-quality JPG or PNG. Max: 5MB.
        </p>
    </div>

    <!-- Submit Button -->
    <div class="col-span-1 md:col-span-2 mt-4">
        <!-- Đổi label thành Proceed to Checkout cho rõ nghĩa trả tiền -->
        <button type="submit" class="w-full py-4 text-white bg-blue-600 hover:bg-blue-700 font-bold rounded-md shadow-lg transition duration-200">
            Proceed to Checkout
        </button>
    </div>

</form>
        </div>
    </div>
  </div>

</Layout>

<script is:inline>
  // Script xử lý validate file size
  const fileInput = document.getElementById('logo_upload');
  
  if (fileInput) {
      fileInput.addEventListener('change', function() {
          const fileSize = this.files[0].size / 1024 / 1024; // in MiB
          if (fileSize > 5) {
              alert('File size exceeds 5MB. Please choose a smaller file.');
              this.value = ''; // Reset input
          }
      });
  }
</script>
